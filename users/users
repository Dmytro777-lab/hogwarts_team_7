import re
from helpers import NotValidEmailError, NotValidPhoneNumberError


class Field:
    def __init__(self, value):
        self.value = value

    def __str__(self):
        return str(self.value)


class Phone(Field):
    # Using a compiled regular expression to improve performance
    PHONE_NUMBER_REGEX = re.compile(r"\d{10}")

    def __init__(self, value: str):
        if not Phone.is_valid(value):
            raise NotValidPhoneNumberError(f"Invalid phone number: {value}")
        super().__init__(value)

    @staticmethod
    def is_valid(value):
        # Using a compiled regular expression
        return Phone.PHONE_NUMBER_REGEX.fullmatch(value) is not None
    

class Email(Field):
    # Using a compiled regular expression for email
    EMAIL_REGEX = re.compile(r"^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$")

    def __init__(self, value):
        if not Email.is_valid(value):
            raise NotValidEmailError(f"Invalid email address: {value}")
        super().__init__(value)

    @staticmethod
    def is_valid(value):
        # Using a compiled regular expression
        return Email.EMAIL_REGEX.fullmatch(value) is not None